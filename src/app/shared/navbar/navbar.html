<nav class="bg-white border-gray-200 dark:border-gray-600 dark:bg-gray-900">
    <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl p-4">
        <a routerLink="/dashboard" class="flex items-center space-x-3 rtl:space-x-reverse">
            <img src="https://flowbite.com/docs/images/logo.svg" class="h-8" alt="Flowbite Logo" />
            <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">HMS</span>
        </a>
        <button data-collapse-toggle="mega-menu-full" type="button"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
            aria-controls="mega-menu-full" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M1 1h15M1 7h15M1 13h15" />
            </svg>
        </button>

        <!-- ðŸ”¹ TOP LEVEL MENU -->
        <div id="mega-menu-full" class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1">
            <ul class="flex flex-col mt-4 font-medium md:flex-row md:mt-0 md:space-x-8 rtl:space-x-reverse">
                <li>
                    <a routerLink="/dashboard"
                        class="block py-2 px-3 text-gray-900 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700">Dashboard</a>
                </li>

                <li>
                    <!-- Toggle Button (mobile) -->

                    <button (click)="toggleMenu()" data-collapse-toggle="mega-menu-full-dropdown"
                        class="flex items-center justify-between w-full py-2 px-3 font-medium text-gray-900 border-b border-gray-100 md:w-auto hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-600 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700">
                        Modules
                        <svg class="w-2.5 h-2.5 ms-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 10 6">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m1 1 4 4 4-4" />
                        </svg>
                    </button>
                </li>

                <li>
                    <a routerLink="/reports-analytics"
                        class="block py-2 px-3 text-gray-900 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700">Reports</a>
                </li>

                <li>
                    <a routerLink="/notifications"
                        class="block py-2 px-3 text-gray-900 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700">Notifications</a>
                </li>

                <li>
                    <a routerLink="/feedback-crm"
                        class="block py-2 px-3 text-gray-900 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700">Feedback</a>
                </li>
<li>
    <a routerLink="/feedback-crm"
        class="block py-2 px-3 text-gray-900 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700">Feedback</a>
</li>


                <button *ngIf="authService.isLoggedIn()" (click)="logout()" class="bg-red-500 hover:bg-red-600 px-3 py-1 rounded">
                    Logout
                </button>
            </ul>
        </div>
    </div>

    <!-- ðŸ”¹ DROPDOWN SECTIONS (Grouped HMS Pages) -->
    <!-- Menu Links -->

    <div id="mega-menu-full-dropdown" [ngClass]="{
          'block': menuOpen,
          'hidden': !menuOpen
        }" class="mt-1 bg-white border-gray-200 shadow-xs border-y dark:bg-gray-800 dark:border-gray-600">
        <div
            class="grid max-w-screen-xl px-4 py-5 mx-auto text-gray-900 dark:text-white sm:grid-cols-2 md:grid-cols-3 md:px-6">

            <!-- ðŸ©º Core Clinical & Patient Flow -->
            <ul aria-labelledby="mega-menu-full-dropdown-button">
                <li><a routerLink="/patient-registration"
                        class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">Patient Registration</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">PMI, MRN, demographics, KYC.</span>
                    </a></li>
                <li><a routerLink="/appointments" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">Appointments</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Doctor/Dept scheduling,
                            rescheduling.</span>
                    </a></li>
                <li><a routerLink="/opd" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">OPD</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Visit creation, notes,
                            prescriptions.</span>
                    </a></li>
            </ul>

            <!-- ðŸ¥ Inpatient & Emergency -->
            <ul>
                <li><a routerLink="/ipd" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">IPD</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Admission, bed transfer,
                            discharge.</span>
                    </a></li>
                <li><a routerLink="/emergency" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">Emergency</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Triage, quick registration, MLC.</span>
                    </a></li>
                <li><a routerLink="/emr" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">EMR</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Clinical notes, problems,
                            diagnosis.</span>
                    </a></li>
            </ul>

            <!-- ðŸ§ª Diagnostics & Admin -->
            <ul class="hidden md:block">
                <li><a routerLink="/cpoe" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">CPOE</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Prescriptions, lab/radio orders.</span>
                    </a></li>
                <li><a routerLink="/laboratory" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">Laboratory</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">LIS, results, validation,
                            reporting.</span>
                    </a></li>
                <li><a routerLink="/pharmacy" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">Pharmacy</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Stock, batch expiry, issue/return.</span>
                    </a></li>
                <li><a routerLink="/billing" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">Billing</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Invoices, insurance, packages.</span>
                    </a></li>
                <li><a routerLink="/inventory" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">Inventory</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Stores, GRN, procurement, assets.</span>
                    </a></li>
                <li><a routerLink="/master-config" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">Master Config</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Departments, templates, tariffs.</span>
                    </a></li>
                <li><a routerLink="/rbac-audit" class="block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="font-semibold">RBAC & Audit</div>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Roles, access logs, user trails.</span>
                    </a></li>
            </ul>
        </div>
    </div>
</nav>